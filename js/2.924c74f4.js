webpackJsonp([2],{1111:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubUserList=void 0;var n=a(301);t.getSubUserList=function(e){return(0,n.post)("/admin/coursesubscribe/list",e)}},1112:function(e,t){},614:function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(634),o=n(s),l=a(99),c=n(l),b=a(42),f=n(b),d=a(300),m=n(d),p=a(100),h=n(p),g=a(56),y=n(g),v=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(635),a(101),a(43),a(299),a(102),a(57);var S=a(1111),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(S),k=a(626),E=n(k);a(1112);var L=[{title:"课程名称",dataIndex:"courseTitle",key:"courseTitle"},{title:"订阅时间",dataIndex:"createTime",key:"createTime"},{title:"来源",dataIndex:"subscribeSource",key:"subscribeSource"},{title:"分类",dataIndex:"catalogName",key:"catalogName"},{title:"订阅类型",dataIndex:"subscribeType",key:"subscribeType"},{title:"用户昵称",dataIndex:"nickName",key:"nickName"}],T=function(t){function a(e){i(this,a);var t=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={pagination:{},loading:!1,userList:[],courseValue:"",mobileValue:"",limit:10,page:0,totalCount:""},t}return u(a,t),v(a,[{key:"componentDidMount",value:function(){this.getSubUserList()}},{key:"getSubUserList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:10,page:0},t=this;this.setState({loading:!0}),C.getSubUserList(e).then(function(e){200==e.code?(t.state.pagination.total=e.data.totalCount,e.data.list.forEach(function(e,t){e.index=t,1==e.subscribeType?e.subscribeType="订单购买":e.subscribeType="免费订阅",1==e.subscribeSource?e.subscribeSource="途正APP":e.subscribeSource="小鹅通",null==e.mobile?e.mobile="-":e.mobile=e.mobile}),t.setState({userList:e.data.list,totalCount:e.data.totalCount,loading:!1})):y.default.destroy()}).catch(function(e){})}},{key:"handleCommentChange",value:function(e){this.setState({courseValue:e.target.value})}},{key:"ChangeNumber",value:function(e){this.setState({mobileValue:e.target.value})}},{key:"searchCourse",value:function(){var e=this.state.courseValue,t=this.state.mobileValue;if(t||""!=t.trim()||e||""!=e.trim()){var a={courseTitle:e.trim()||"",nickName:t.trim()||""};this.getSubUserList(a)}else y.default.error("输入不能为空")}},{key:"resetSubscribeList",value:function(){var e=this;this.setState({loading:!0}),C.getSubUserList({}).then(function(t){200==t.code?(e.state.pagination.total=t.data.totalCount,t.data.list.forEach(function(e,t){e.index=t,1==e.subscribeType?e.subscribeType="订单购买":e.subscribeType="免费订阅",1==e.subscribeSource?e.subscribeSource="途正APP":e.subscribeSource="小鹅通",null==e.mobile?e.mobile="-":e.mobile=e.mobile}),e.setState({mobileValue:"",courseValue:"",userList:t.data.list,totalCount:t.data.totalCount,loading:!1})):y.default.destroy()})}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e,loading:!0},function(){var e={courseTitle:t.state.courseValue,nickName:t.state.mobileValue,page:t.state.page,limit:t.state.limit};t.setState({loading:!0}),t.getSubUserList(e)})}},{key:"render",value:function(){var t=this;return e.createElement("div",null,e.createElement(E.default,{title:"订阅列表"}),e.createElement("div",{className:"subuserList-wrap"},e.createElement(c.default,null,e.createElement(h.default,{span:2},"用户昵称"),e.createElement(h.default,{span:5},e.createElement(m.default,{placeholder:"请输入用户昵称",type:"tel",value:this.state.mobileValue,onChange:this.ChangeNumber.bind(this)})),e.createElement(h.default,{span:2,style:{marginLeft:15}},"课程名称"),e.createElement(h.default,{span:8},e.createElement(m.default,{placeholder:"请输入课程名称",value:this.state.courseValue,onChange:this.handleCommentChange.bind(this)})),e.createElement(h.default,{span:2},e.createElement(f.default,{type:"primary",onClick:function(e){return t.searchCourse(e)},style:{marginLeft:15}},"查询")),e.createElement(h.default,{span:3},e.createElement(f.default,{type:"default",onClick:function(e){return t.resetSubscribeList(e)},style:{marginLeft:5}},"重置"))),e.createElement("div",{className:"userList"},e.createElement(o.default,{columns:L,rowKey:function(e){return e.index},dataSource:this.state.userList,pagination:{defaultPageSize:this.state.limit,current:this.state.page,total:this.state.totalCount,onChange:this.pageChange.bind(this)},loading:this.state.loading}))))}}]),a}(e.Component);t.default=T}).call(t,a(1))}});