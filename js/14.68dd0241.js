webpackJsonp([14],{612:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(627),i=n(s),r=a(634),c=n(r),f=a(99),d=n(f),h=a(42),p=n(h),y=a(300),g=n(y),m=a(100),v=n(m),C=a(56),k=n(C),b=a(629),E=n(b),I=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(628),a(635),a(101),a(43),a(299),a(102),a(57),a(631);var T=a(1),_=n(T),L=a(626),w=n(L),z=a(792),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(z);a(793);var S=E.default.Option,G=function(e){function t(e){u(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={columns:[{title:"课程名称",dataIndex:"tzCourseTitle",key:"tzCourseTitle"},{title:"小鹅通课程名",dataIndex:"courseTitle",key:"courseTitle"},{title:"资源类型",dataIndex:"resourceType",key:"resourceType",render:function(e){return 6===e?"课程":1==e?"图文":2==e?"音频":3==e?"视频":4==e?"直播":5==e?"活动":7==e?"社群":void 0}},{title:"状态",dataIndex:"tzCourseId",key:"tzCourseId",render:function(e){return e?"关联":"未关联"}},{title:"操作",key:"action",render:function(e,t){return t.tzCourseId?_.default.createElement("a",{onClick:function(){return a.unRelation(t)}},"取消关联"):_.default.createElement("a",{onClick:function(){return a.relation(t)}},"关联")}}],gooseList:[],courseTitle:"",hasTzCourseId:"",xetCourseId:"",tzCourseId:"",page:0,limit:10,visible:!1,inputValue:"",loading:!1,infoMsg:"确认要取消关联该课程吗？",selectDefaultValue:"请选择"},a}return o(t,e),I(t,[{key:"componentDidMount",value:function(){this._getGooseList()}},{key:"_getGooseList",value:function(){var e=this,t={page:this.state.page,limit:this.state.limit,courseTitle:this.state.inputValue,hasTzCourseId:this.state.hasTzCourseId};this.setState({loading:!0}),O.getGooseList(t).then(function(t){e.setState({gooseList:t.data.list,totalCount:t.data.totalCount,loading:!1})})}},{key:"inputChangeValue",value:function(e){this.setState({inputValue:e.target.value})}},{key:"searchGooseList",value:function(){this._getGooseList()}},{key:"resetGooseList",value:function(){var e=this;this.setState({loading:!0}),O.getGooseList({}).then(function(t){e.setState({gooseList:t.data.list,loading:!1,inputValue:"",selectDefaultValue:"请选择",hasTzCourseId:"",totalCount:t.data.totalCount})})}},{key:"relation",value:function(e){var t={source:"gooseList",courseTitle:e.courseTitle,xetCourseId:e.courseId},a={pathname:"/selectCourse",state:t};this.props.history.push(a)}},{key:"unRelation",value:function(e){this.showModal(e),e.courseId}},{key:"sureUnRelation",value:function(e){var t=this,a={tzCourseId:"",xetCourseId:e};O.relationGooseCourse(a).then(function(e){200===e.code&&(k.default.success("取消关联成功",1),t._getGooseList())})}},{key:"selsectChange",value:function(e){"true"===e?this.setState({selectDefaultValue:"关联",hasTzCourseId:e}):"false"===e&&this.setState({selectDefaultValue:"未关联",hasTzCourseId:e})}},{key:"showModal",value:function(e){this.setState({visible:!0,xetCourseId:e.courseId})}},{key:"handleOk",value:function(){this.setState({visible:!1}),this.sureUnRelation(this.state.xetCourseId)}},{key:"handleCancel",value:function(){this.setState({visible:!1})}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e,loading:!0},function(){t._getGooseList()})}},{key:"render",value:function(){var e=this;return _.default.createElement("div",null,_.default.createElement(w.default,{title:"小鹅通课程列表"}),_.default.createElement("div",{className:"gooseList-wrap"},_.default.createElement(d.default,null,_.default.createElement(v.default,{span:3}),_.default.createElement(v.default,{span:5},_.default.createElement("span",{style:{marginRight:20}},"课程状态:"),_.default.createElement(E.default,{value:this.state.selectDefaultValue,style:{width:120},onChange:function(t){return e.selsectChange(t)}},_.default.createElement(S,{value:"true"},"关联"),_.default.createElement(S,{value:"false"},"未关联"))),_.default.createElement(v.default,{span:12},_.default.createElement("span",{style:{margin:10}},"小鹅通课程名:"),_.default.createElement(g.default,{style:{width:"340px"},placeholder:"请输入小鹅通课程名",value:this.state.inputValue,onChange:function(t){return e.inputChangeValue(t)}})),_.default.createElement(v.default,{span:2},_.default.createElement(p.default,{type:"primary",onClick:function(){return e.searchGooseList()},style:{marginLeft:10}},"查询")),_.default.createElement(v.default,{span:2},_.default.createElement(p.default,{type:"default",onClick:function(){return e.resetGooseList()}},"重置"))),_.default.createElement(d.default,{style:{marginTop:25}},_.default.createElement(c.default,{columns:this.state.columns,rowKey:function(e,t){return t},dataSource:this.state.gooseList,loading:this.state.loading,pagination:{defaultPageSize:this.state.limit,current:this.state.page,total:this.state.totalCount,onChange:this.pageChange.bind(this)}})),_.default.createElement(i.default,{title:"关联小鹅通课程",visible:this.state.visible,footer:[_.default.createElement(p.default,{key:"back",onClick:function(){return e.handleCancel()}},"取消"),_.default.createElement(p.default,{key:"submit",type:"primary",onClick:function(){return e.handleOk()}},"确定")]},_.default.createElement("p",null,this.state.infoMsg))))}}]),t}(_.default.Component);t.default=G}});